<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait that abstracts interactions with interrupt controllers."><meta name="keywords" content="rust, rustlang, rust-lang, IrqChip"><title>IrqChip in devices::irqchip - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../devices/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../devices/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">IrqChip</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.add_vcpu">add_vcpu</a></li><li><a href="#tymethod.broadcast_eoi">broadcast_eoi</a></li><li><a href="#tymethod.check_capability">check_capability</a></li><li><a href="#tymethod.finalize_devices">finalize_devices</a></li><li><a href="#tymethod.get_mp_state">get_mp_state</a></li><li><a href="#tymethod.halted">halted</a></li><li><a href="#tymethod.inject_interrupts">inject_interrupts</a></li><li><a href="#tymethod.irq_delayed_event_token">irq_delayed_event_token</a></li><li><a href="#tymethod.irq_event_tokens">irq_event_tokens</a></li><li><a href="#tymethod.kick_halted_vcpus">kick_halted_vcpus</a></li><li><a href="#tymethod.process_delayed_irq_events">process_delayed_irq_events</a></li><li><a href="#tymethod.register_edge_irq_event">register_edge_irq_event</a></li><li><a href="#tymethod.register_level_irq_event">register_level_irq_event</a></li><li><a href="#tymethod.route_irq">route_irq</a></li><li><a href="#tymethod.service_irq">service_irq</a></li><li><a href="#tymethod.service_irq_event">service_irq_event</a></li><li><a href="#tymethod.set_irq_routes">set_irq_routes</a></li><li><a href="#tymethod.set_mp_state">set_mp_state</a></li><li><a href="#tymethod.try_clone">try_clone</a></li><li><a href="#tymethod.unregister_edge_irq_event">unregister_edge_irq_event</a></li><li><a href="#tymethod.unregister_level_irq_event">unregister_level_irq_event</a></li><li><a href="#tymethod.wait_until_runnable">wait_until_runnable</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In devices::irqchip</a></h2><div id="sidebar-vars" data-name="IrqChip" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../devices/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="../index.html">devices</a>::<wbr><a href="index.html">irqchip</a>::<wbr><a class="trait" href="#">IrqChip</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#135-232">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait IrqChip: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> {
<details class="rustdoc-toggle type-contents-toggle"><summary class="hideme"><span>Show 22 methods</span></summary>    fn <a href="#tymethod.add_vcpu" class="fnname">add_vcpu</a>(&amp;mut self, vcpu_id: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>, vcpu: &amp;dyn <a class="trait" href="../../hypervisor/trait.Vcpu.html" title="trait hypervisor::Vcpu">Vcpu</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.register_edge_irq_event" class="fnname">register_edge_irq_event</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq_event: &amp;<a class="struct" href="../irq_event/struct.IrqEdgeEvent.html" title="struct devices::irq_event::IrqEdgeEvent">IrqEdgeEvent</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source: <a class="struct" href="struct.IrqEventSource.html" title="struct devices::irqchip::IrqEventSource">IrqEventSource</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="type.IrqEventIndex.html" title="type devices::irqchip::IrqEventIndex">IrqEventIndex</a>&gt;&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.unregister_edge_irq_event" class="fnname">unregister_edge_irq_event</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq_event: &amp;<a class="struct" href="../irq_event/struct.IrqEdgeEvent.html" title="struct devices::irq_event::IrqEdgeEvent">IrqEdgeEvent</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.register_level_irq_event" class="fnname">register_level_irq_event</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq_event: &amp;<a class="struct" href="../irq_event/struct.IrqLevelEvent.html" title="struct devices::irq_event::IrqLevelEvent">IrqLevelEvent</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source: <a class="struct" href="struct.IrqEventSource.html" title="struct devices::irqchip::IrqEventSource">IrqEventSource</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="type.IrqEventIndex.html" title="type devices::irqchip::IrqEventIndex">IrqEventIndex</a>&gt;&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.unregister_level_irq_event" class="fnname">unregister_level_irq_event</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq_event: &amp;<a class="struct" href="../irq_event/struct.IrqLevelEvent.html" title="struct devices::irq_event::IrqLevelEvent">IrqLevelEvent</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.route_irq" class="fnname">route_irq</a>(&amp;mut self, route: <a class="struct" href="../../hypervisor/struct.IrqRoute.html" title="struct hypervisor::IrqRoute">IrqRoute</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.set_irq_routes" class="fnname">set_irq_routes</a>(&amp;mut self, routes: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">&amp;[</a><a class="struct" href="../../hypervisor/struct.IrqRoute.html" title="struct hypervisor::IrqRoute">IrqRoute</a><a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.irq_event_tokens" class="fnname">irq_event_tokens</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.tuple.html">(</a><a class="type" href="type.IrqEventIndex.html" title="type devices::irqchip::IrqEventIndex">IrqEventIndex</a>, <a class="struct" href="struct.IrqEventSource.html" title="struct devices::irqchip::IrqEventSource">IrqEventSource</a>, <a class="struct" href="../../base/event/struct.Event.html" title="struct base::event::Event">Event</a><a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.tuple.html">)</a>&gt;&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.service_irq" class="fnname">service_irq</a>(&amp;mut self, irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, level: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.service_irq_event" class="fnname">service_irq_event</a>(&amp;mut self, event_index: <a class="type" href="type.IrqEventIndex.html" title="type devices::irqchip::IrqEventIndex">IrqEventIndex</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.broadcast_eoi" class="fnname">broadcast_eoi</a>(&amp;self, vector: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u8.html">u8</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.inject_interrupts" class="fnname">inject_interrupts</a>(&amp;self, vcpu: &amp;dyn <a class="trait" href="../../hypervisor/trait.Vcpu.html" title="trait hypervisor::Vcpu">Vcpu</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.halted" class="fnname">halted</a>(&amp;self, vcpu_id: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>);
<div class="item-spacer"></div>    fn <a href="#tymethod.wait_until_runnable" class="fnname">wait_until_runnable</a>(&amp;self, vcpu: &amp;dyn <a class="trait" href="../../hypervisor/trait.Vcpu.html" title="trait hypervisor::Vcpu">Vcpu</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="enum.VcpuRunState.html" title="enum devices::irqchip::VcpuRunState">VcpuRunState</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.kick_halted_vcpus" class="fnname">kick_halted_vcpus</a>(&amp;self);
<div class="item-spacer"></div>    fn <a href="#tymethod.get_mp_state" class="fnname">get_mp_state</a>(&amp;self, vcpu_id: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="../../hypervisor/enum.MPState.html" title="enum hypervisor::MPState">MPState</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.set_mp_state" class="fnname">set_mp_state</a>(&amp;mut self, vcpu_id: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>, state: &amp;<a class="enum" href="../../hypervisor/enum.MPState.html" title="enum hypervisor::MPState">MPState</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.try_clone" class="fnname">try_clone</a>(&amp;self) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;Self&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span>;
<div class="item-spacer"></div>    fn <a href="#tymethod.finalize_devices" class="fnname">finalize_devices</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resources: &amp;mut <a class="struct" href="../../resources/system_allocator/struct.SystemAllocator.html" title="struct resources::system_allocator::SystemAllocator">SystemAllocator</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;io_bus: &amp;<a class="struct" href="../bus/struct.Bus.html" title="struct devices::bus::Bus">Bus</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmio_bus: &amp;<a class="struct" href="../bus/struct.Bus.html" title="struct devices::bus::Bus">Bus</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.process_delayed_irq_events" class="fnname">process_delayed_irq_events</a>(&amp;mut self) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.irq_delayed_event_token" class="fnname">irq_delayed_event_token</a>(&amp;self) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../base/event/struct.Event.html" title="struct base::event::Event">Event</a>&gt;&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.check_capability" class="fnname">check_capability</a>(&amp;self, c: <a class="enum" href="enum.IrqChipCap.html" title="enum devices::irqchip::IrqChipCap">IrqChipCap</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>;
</details>}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait that abstracts interactions with interrupt controllers.</p>
<p>Each VM will have one IrqChip instance which is responsible for routing IRQ lines and
registering IRQ events. Depending on the implementation, the IrqChip may interact with an
underlying hypervisor API or emulate devices in userspace.</p>
<p>This trait is generic over a Vcpu type because some IrqChip implementations can support
multiple hypervisors with a single implementation.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.add_vcpu" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#137">source</a></div><h4 class="code-header">fn <a href="#tymethod.add_vcpu" class="fnname">add_vcpu</a>(&amp;mut self, vcpu_id: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>, vcpu: &amp;dyn <a class="trait" href="../../hypervisor/trait.Vcpu.html" title="trait hypervisor::Vcpu">Vcpu</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Add a vcpu to the irq chip.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.register_edge_irq_event" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#140-145">source</a></div><h4 class="code-header">fn <a href="#tymethod.register_edge_irq_event" class="fnname">register_edge_irq_event</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;irq_event: &amp;<a class="struct" href="../irq_event/struct.IrqEdgeEvent.html" title="struct devices::irq_event::IrqEdgeEvent">IrqEdgeEvent</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;source: <a class="struct" href="struct.IrqEventSource.html" title="struct devices::irqchip::IrqEventSource">IrqEventSource</a><br>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="type.IrqEventIndex.html" title="type devices::irqchip::IrqEventIndex">IrqEventIndex</a>&gt;&gt;</h4></div></summary><div class="docblock"><p>Register an event with edge-trigger semantic that can trigger an interrupt for a particular GSI.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.unregister_edge_irq_event" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#148">source</a></div><h4 class="code-header">fn <a href="#tymethod.unregister_edge_irq_event" class="fnname">unregister_edge_irq_event</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;irq_event: &amp;<a class="struct" href="../irq_event/struct.IrqEdgeEvent.html" title="struct devices::irq_event::IrqEdgeEvent">IrqEdgeEvent</a><br>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Unregister an event with edge-trigger semantic for a particular GSI.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.register_level_irq_event" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#151-156">source</a></div><h4 class="code-header">fn <a href="#tymethod.register_level_irq_event" class="fnname">register_level_irq_event</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;irq_event: &amp;<a class="struct" href="../irq_event/struct.IrqLevelEvent.html" title="struct devices::irq_event::IrqLevelEvent">IrqLevelEvent</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;source: <a class="struct" href="struct.IrqEventSource.html" title="struct devices::irqchip::IrqEventSource">IrqEventSource</a><br>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="type.IrqEventIndex.html" title="type devices::irqchip::IrqEventIndex">IrqEventIndex</a>&gt;&gt;</h4></div></summary><div class="docblock"><p>Register an event with level-trigger semantic that can trigger an interrupt for a particular GSI.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.unregister_level_irq_event" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#159">source</a></div><h4 class="code-header">fn <a href="#tymethod.unregister_level_irq_event" class="fnname">unregister_level_irq_event</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;irq_event: &amp;<a class="struct" href="../irq_event/struct.IrqLevelEvent.html" title="struct devices::irq_event::IrqLevelEvent">IrqLevelEvent</a><br>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Unregister an event with level-trigger semantic for a particular GSI.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.route_irq" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#162">source</a></div><h4 class="code-header">fn <a href="#tymethod.route_irq" class="fnname">route_irq</a>(&amp;mut self, route: <a class="struct" href="../../hypervisor/struct.IrqRoute.html" title="struct hypervisor::IrqRoute">IrqRoute</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Route an IRQ line to an interrupt controller, or to a particular MSI vector.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.set_irq_routes" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#165">source</a></div><h4 class="code-header">fn <a href="#tymethod.set_irq_routes" class="fnname">set_irq_routes</a>(&amp;mut self, routes: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">&amp;[</a><a class="struct" href="../../hypervisor/struct.IrqRoute.html" title="struct hypervisor::IrqRoute">IrqRoute</a><a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Replace all irq routes with the supplied routes</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.irq_event_tokens" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#169">source</a></div><h4 class="code-header">fn <a href="#tymethod.irq_event_tokens" class="fnname">irq_event_tokens</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self<br>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.tuple.html">(</a><a class="type" href="type.IrqEventIndex.html" title="type devices::irqchip::IrqEventIndex">IrqEventIndex</a>, <a class="struct" href="struct.IrqEventSource.html" title="struct devices::irqchip::IrqEventSource">IrqEventSource</a>, <a class="struct" href="../../base/event/struct.Event.html" title="struct base::event::Event">Event</a><a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.tuple.html">)</a>&gt;&gt;</h4></div></summary><div class="docblock"><p>Return a vector of all registered irq numbers and their associated events and event
sources. These should be used by the main thread to wait for irq events.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.service_irq" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#173">source</a></div><h4 class="code-header">fn <a href="#tymethod.service_irq" class="fnname">service_irq</a>(&amp;mut self, irq: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u32.html">u32</a>, level: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Either assert or deassert an IRQ line.  Sends to either an interrupt controller, or does
a send_msi if the irq is associated with an MSI.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.service_irq_event" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#179">source</a></div><h4 class="code-header">fn <a href="#tymethod.service_irq_event" class="fnname">service_irq_event</a>(&amp;mut self, event_index: <a class="type" href="type.IrqEventIndex.html" title="type devices::irqchip::IrqEventIndex">IrqEventIndex</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Service an IRQ event by asserting then deasserting an IRQ line. The associated Event
that triggered the irq event will be read from. If the irq is associated with a resample
Event, then the deassert will only happen after an EOI is broadcast for a vector
associated with the irq line.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.broadcast_eoi" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#182">source</a></div><h4 class="code-header">fn <a href="#tymethod.broadcast_eoi" class="fnname">broadcast_eoi</a>(&amp;self, vector: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u8.html">u8</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Broadcast an end of interrupt.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.inject_interrupts" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#185">source</a></div><h4 class="code-header">fn <a href="#tymethod.inject_interrupts" class="fnname">inject_interrupts</a>(&amp;self, vcpu: &amp;dyn <a class="trait" href="../../hypervisor/trait.Vcpu.html" title="trait hypervisor::Vcpu">Vcpu</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Injects any pending interrupts for <code>vcpu</code>.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.halted" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#188">source</a></div><h4 class="code-header">fn <a href="#tymethod.halted" class="fnname">halted</a>(&amp;self, vcpu_id: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>)</h4></div></summary><div class="docblock"><p>Notifies the irq chip that the specified VCPU has executed a halt instruction.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.wait_until_runnable" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#193">source</a></div><h4 class="code-header">fn <a href="#tymethod.wait_until_runnable" class="fnname">wait_until_runnable</a>(&amp;self, vcpu: &amp;dyn <a class="trait" href="../../hypervisor/trait.Vcpu.html" title="trait hypervisor::Vcpu">Vcpu</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="enum.VcpuRunState.html" title="enum devices::irqchip::VcpuRunState">VcpuRunState</a>&gt;</h4></div></summary><div class="docblock"><p>Blocks until <code>vcpu</code> is in a runnable state or until interrupted by
<code>IrqChip::kick_halted_vcpus</code>.  Returns <code>VcpuRunState::Runnable if vcpu is runnable, or </code>VcpuRunState::Interrupted` if the wait was interrupted.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.kick_halted_vcpus" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#199">source</a></div><h4 class="code-header">fn <a href="#tymethod.kick_halted_vcpus" class="fnname">kick_halted_vcpus</a>(&amp;self)</h4></div></summary><div class="docblock"><p>Makes unrunnable VCPUs return immediately from <code>wait_until_runnable</code>.
For UserspaceIrqChip, every vcpu gets kicked so its current or next call to
<code>wait_until_runnable</code> will immediately return false.  After that one kick, subsequent
<code>wait_until_runnable</code> calls go back to waiting for runnability normally.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_mp_state" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#202">source</a></div><h4 class="code-header">fn <a href="#tymethod.get_mp_state" class="fnname">get_mp_state</a>(&amp;self, vcpu_id: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="../../hypervisor/enum.MPState.html" title="enum hypervisor::MPState">MPState</a>&gt;</h4></div></summary><div class="docblock"><p>Get the current MP state of the specified VCPU.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.set_mp_state" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#205">source</a></div><h4 class="code-header">fn <a href="#tymethod.set_mp_state" class="fnname">set_mp_state</a>(&amp;mut self, vcpu_id: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>, state: &amp;<a class="enum" href="../../hypervisor/enum.MPState.html" title="enum hypervisor::MPState">MPState</a>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Set the current MP state of the specified VCPU.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.try_clone" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#208-210">source</a></div><h4 class="code-header">fn <a href="#tymethod.try_clone" class="fnname">try_clone</a>(&amp;self) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;Self&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h4></div></summary><div class="docblock"><p>Attempt to create a shallow clone of this IrqChip instance.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.finalize_devices" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#214-219">source</a></div><h4 class="code-header">fn <a href="#tymethod.finalize_devices" class="fnname">finalize_devices</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;resources: &amp;mut <a class="struct" href="../../resources/system_allocator/struct.SystemAllocator.html" title="struct resources::system_allocator::SystemAllocator">SystemAllocator</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;io_bus: &amp;<a class="struct" href="../bus/struct.Bus.html" title="struct devices::bus::Bus">Bus</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;mmio_bus: &amp;<a class="struct" href="../bus/struct.Bus.html" title="struct devices::bus::Bus">Bus</a><br>) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Finalize irqchip setup. Should be called once all devices have registered irq events and
been added to the io_bus and mmio_bus.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.process_delayed_irq_events" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#222">source</a></div><h4 class="code-header">fn <a href="#tymethod.process_delayed_irq_events" class="fnname">process_delayed_irq_events</a>(&amp;mut self) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Process any irqs events that were delayed because of any locking issues.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.irq_delayed_event_token" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#228">source</a></div><h4 class="code-header">fn <a href="#tymethod.irq_delayed_event_token" class="fnname">irq_delayed_event_token</a>(&amp;self) -&gt; <a class="type" href="../../base/errno/type.Result.html" title="type base::errno::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../base/event/struct.Event.html" title="struct base::event::Event">Event</a>&gt;&gt;</h4></div></summary><div class="docblock"><p>Return an event which is meant to trigger process of any irqs events that were delayed
by calling process_delayed_irq_events(). This should be used by the main thread to wait
for delayed irq event kick. It is process_delayed_irq_events() responsibility to read
the event as long as there is no more irqs to be serviced.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.check_capability" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/devices/irqchip/mod.rs.html#231">source</a></div><h4 class="code-header">fn <a href="#tymethod.check_capability" class="fnname">check_capability</a>(&amp;self, c: <a class="enum" href="enum.IrqChipCap.html" title="enum devices::irqchip::IrqChipCap">IrqChipCap</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>Checks if a particular <code>IrqChipCap</code> is available.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><section id="impl-IrqChip" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/devices/irqchip/kvm/mod.rs.html#42-215">source</a></span><a href="#impl-IrqChip" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="trait.IrqChip.html" title="trait devices::irqchip::IrqChip">IrqChip</a> for <a class="struct" href="kvm/x86_64/struct.KvmKernelIrqChip.html" title="struct devices::irqchip::kvm::x86_64::KvmKernelIrqChip">KvmKernelIrqChip</a></h3></section><div class="docblock"><p>This IrqChip only works with Kvm so we only implement it for KvmVcpu.</p>
</div><section id="impl-IrqChip-1" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/devices/irqchip/kvm/x86_64.rs.html#407-733">source</a></span><a href="#impl-IrqChip-1" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="trait.IrqChip.html" title="trait devices::irqchip::IrqChip">IrqChip</a> for <a class="struct" href="kvm/x86_64/struct.KvmSplitIrqChip.html" title="struct devices::irqchip::kvm::x86_64::KvmSplitIrqChip">KvmSplitIrqChip</a></h3></section><div class="docblock"><p>This IrqChip only works with Kvm so we only implement it for KvmVcpu.</p>
</div><section id="impl-IrqChip-2" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/devices/irqchip/userspace.rs.html#398-852">source</a></span><a href="#impl-IrqChip-2" class="anchor"></a><h3 class="code-header in-band">impl&lt;V:&nbsp;<a class="trait" href="../../hypervisor/x86_64/trait.VcpuX86_64.html" title="trait hypervisor::x86_64::VcpuX86_64">VcpuX86_64</a> + 'static&gt; <a class="trait" href="trait.IrqChip.html" title="trait devices::irqchip::IrqChip">IrqChip</a> for <a class="struct" href="userspace/struct.UserspaceIrqChip.html" title="struct devices::irqchip::userspace::UserspaceIrqChip">UserspaceIrqChip</a>&lt;V&gt;</h3></section></div><script type="text/javascript" src="../../implementors/devices/irqchip/trait.IrqChip.js" async></script></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="devices" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0 (7737e0b5c 2022-04-04)" ></div>
</body></html>